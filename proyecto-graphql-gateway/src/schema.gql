# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type Medico {
  id_medico: ID!
  institucion: String!
  numero_licencia: String!
  ubicacion_consultorio: String!
  usuario: Usuario
}

type Paciente {
  cedula: String!
  direccion: String!
  fecha_nacimiento: DateTime!
  id_paciente: ID!
  nombre: String!
  telefono: String!
  usuario: Usuario
}

input PaginationInput {
  """Número de página (1-based)"""
  page: Int! = 1

  """Tamaño de página"""
  pageSize: Int! = 10
}

"""Estadísticas agregadas sobre recetas y prescripciones"""
type PrescriptionAnalyticsResult {
  periodEnd: String!
  periodStart: String!
  totalPrescribedItems: Int!
  totalPrescriptions: Int!
}

"""Resultado combinado de producto y sucursal/farmacia"""
type ProductPharmacyResult {
  pharmacyAddress: String!
  pharmacyName: String!
  price: Int!
  productId: Int!
  productName: String!
}

type Query {
  prescriptionAnalytics(from: String!, to: String!): PrescriptionAnalyticsResult!
  receta(id: ID!): Receta!
  recetas: [Receta!]!
  recetasPorMedico(medicoId: ID!): [Receta!]!
  recetasPorPaciente(pacienteId: ID!): [Receta!]!
  searchProductsAndPharmacies(maxPrice: Float, minPrice: Float, pagination: PaginationInput, q: String, sortBy: String): [ProductPharmacyResult!]!
  topDoctors(from: String!, pagination: PaginationInput, to: String!): TopDoctorsResult!
  usuario(id: ID!): Usuario!
  usuarios: [Usuario!]!
}

type Receta {
  diagnostico: String!
  fecha_emision: DateTime!
  id_receta: ID!
  medico: Medico!
  observaciones: String!
  paciente: Paciente!
  ubicacion_emision: String!
}

"""Ranking de médicos por número de recetas o prescripciones"""
type TopDoctor {
  doctorId: Int!
  doctorName: String!
  prescriptionsCount: Int!
}

"""Resultado para top médicos con paginación"""
type TopDoctorsResult {
  items: [TopDoctor!]!
  total: Int!
}

type Usuario {
  apellido: String!
  email: String!
  estado: String!
  fecha_registro: DateTime!
  id_usuario: ID!
  nombre: String!
  tipo_usuario: String!
}